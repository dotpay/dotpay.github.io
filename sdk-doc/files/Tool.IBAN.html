<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Dotpay SDK</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta><link rel="stylesheet" href="../css/template.css" type="text/css"></link><script type="text/javascript" src="../js/jquery-1.4.2.min.js"></script><script type="text/javascript" src="../js/jquery.tools.min.js"></script><script type="text/javascript" src="../js/jquery-ui-1.8.2.custom.min.js"></script><script type="text/javascript" src="../js/template.js"></script></head><body><div id="content"><h1 class="file">Tool/IBAN.php<a href="../source/Tool/IBAN.php.html"><img src="../images/icons/view_source.png" alt="View Source" border="0"></img></a></h1><div id="file-nav-box"><div id="file-nav-options">
              Show:
              <img src="../images/icons/visibility_public.png" alt="Public" id="show-public"></img><img src="../images/icons/visibility_protected.png" alt="Protected" id="show-protected"></img><img src="../images/icons/visibility_private.png" alt="Private" id="show-private"></img><span class="attribute" id="show-inherited">inherited</span></div><div id="file-nav-container"><ul id="file-nav"><li><a href="#classes"><img src="../images/icons/class.png" alt="Class" height="14"></img>
                          Classes
                      </a><ul><li><a href="#\Dotpay\Tool\IBAN">\Dotpay\Tool\IBAN</a></li></ul></li></ul><div style="clear: left;"></div></div><div id="file-nav-tab">
              Table of Contents
          </div></div><a name="top" class="anchor"></a><div id="file-description"><div xmlns:php="http://php.net/xsl" class="long-description"></div></div><dl class="file-info"><dt xmlns:php="http://php.net/xsl">Package</dt><dd xmlns:php="http://php.net/xsl">Default
         
    </dd></dl><a name="classes" class="anchor"></a><a id="\Dotpay\Tool\IBAN" class="anchor"></a><h2 class="class">\Dotpay\Tool\IBAN<div class="to-top"><a href="#top">jump to top</a></div></h2><div class="class"><div class="description"></div><small class="package"><b>Package: </b>Default</small><div xmlns:php="http://php.net/xsl" class="long-description"></div><dl class="class-info"><dt xmlns:php="http://php.net/xsl">Author</dt><dd xmlns:php="http://php.net/xsl">Esser Jan
         
    </dd><dt xmlns:php="http://php.net/xsl">License</dt><dd xmlns:php="http://php.net/xsl"><a href="http://opensource.org/licenses/MIT">MIT</a>
         
    </dd></dl><h3>Properties</h3><div><a id="\Dotpay\Tool\IBAN::$IBANLengths" class="anchor"></a><div class="property protected"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png" alt="&gt;"></img><img src="../images/icons/arrow_down.png" alt="V" style="display: none;"></img></a><code class="title"><img src="../images/icons/property.png" alt="Property"></img><img src="../images/icons/visibility_protected.png" style="margin-right: 5px" alt="protected"></img>array <span class="highlight">$IBANLengths</span> = array('AL' =&gt; 28, 'AD' =&gt; 24, 'AT' =&gt; 20, 'AZ' =&gt; 28, 'BH' =&gt; 22, 'BE' =&gt; 16, 'BA' =&gt; 20, 'BR' =&gt; 29, 'BG' =&gt; 22, 'CR' =&gt; 21, 'HR' =&gt; 21, 'CY' =&gt; 28, 'CZ' =&gt; 24, 'DK' =&gt; 18, 'DO' =&gt; 28, 'EE' =&gt; 20, 'FO' =&gt; 18, 'FI' =&gt; 18, 'FR' =&gt; 27, 'GE' =&gt; 22, 'DE' =&gt; 22, 'GI' =&gt; 23, 'GR' =&gt; 27, 'GL' =&gt; 18, 'GT' =&gt; 28, 'HU' =&gt; 28, 'IS' =&gt; 26, 'IE' =&gt; 22, 'IL' =&gt; 23, 'IT' =&gt; 27, 'JO' =&gt; 30, 'KZ' =&gt; 20, 'KW' =&gt; 30, 'LV' =&gt; 21, 'LB' =&gt; 28, 'LI' =&gt; 21, 'LT' =&gt; 20, 'LU' =&gt; 20, 'MK' =&gt; 19, 'MT' =&gt; 31, 'MR' =&gt; 27, 'MU' =&gt; 30, 'MC' =&gt; 27, 'MD' =&gt; 24, 'ME' =&gt; 22, 'NL' =&gt; 18, 'NO' =&gt; 15, 'PK' =&gt; 24, 'PS' =&gt; 29, 'PL' =&gt; 28, 'PT' =&gt; 25, 'QA' =&gt; 29, 'RO' =&gt; 24, 'SM' =&gt; 27, 'SA' =&gt; 24, 'RS' =&gt; 22, 'SK' =&gt; 24, 'SI' =&gt; 19, 'ES' =&gt; 24, 'SE' =&gt; 24, 'CH' =&gt; 21, 'TN' =&gt; 24, 'TR' =&gt; 26, 'AE' =&gt; 23, 'GB' =&gt; 22, 'VG' =&gt; 24)</code><div class="description"><span class="attribute">static</span><div xmlns:php="http://php.net/xsl" class="short-description">assoc list of `country code => length` pairs that indicate how long tot total IBAN may be</div></div><div class="code-tabs"><div xmlns:php="http://php.net/xsl" class="long-description"></div><strong>Default value</strong><code>array('AL' =&gt; 28, 'AD' =&gt; 24, 'AT' =&gt; 20, 'AZ' =&gt; 28, 'BH' =&gt; 22, 'BE' =&gt; 16, 'BA' =&gt; 20, 'BR' =&gt; 29, 'BG' =&gt; 22, 'CR' =&gt; 21, 'HR' =&gt; 21, 'CY' =&gt; 28, 'CZ' =&gt; 24, 'DK' =&gt; 18, 'DO' =&gt; 28, 'EE' =&gt; 20, 'FO' =&gt; 18, 'FI' =&gt; 18, 'FR' =&gt; 27, 'GE' =&gt; 22, 'DE' =&gt; 22, 'GI' =&gt; 23, 'GR' =&gt; 27, 'GL' =&gt; 18, 'GT' =&gt; 28, 'HU' =&gt; 28, 'IS' =&gt; 26, 'IE' =&gt; 22, 'IL' =&gt; 23, 'IT' =&gt; 27, 'JO' =&gt; 30, 'KZ' =&gt; 20, 'KW' =&gt; 30, 'LV' =&gt; 21, 'LB' =&gt; 28, 'LI' =&gt; 21, 'LT' =&gt; 20, 'LU' =&gt; 20, 'MK' =&gt; 19, 'MT' =&gt; 31, 'MR' =&gt; 27, 'MU' =&gt; 30, 'MC' =&gt; 27, 'MD' =&gt; 24, 'ME' =&gt; 22, 'NL' =&gt; 18, 'NO' =&gt; 15, 'PK' =&gt; 24, 'PS' =&gt; 29, 'PL' =&gt; 28, 'PT' =&gt; 25, 'QA' =&gt; 29, 'RO' =&gt; 24, 'SM' =&gt; 27, 'SA' =&gt; 24, 'RS' =&gt; 22, 'SK' =&gt; 24, 'SI' =&gt; 19, 'ES' =&gt; 24, 'SE' =&gt; 24, 'CH' =&gt; 21, 'TN' =&gt; 24, 'TR' =&gt; 26, 'AE' =&gt; 23, 'GB' =&gt; 22, 'VG' =&gt; 24)</code><strong>Details</strong><dl class="property-info"><dt>Type</dt><dd>array</dd></dl></div><div class="clear"></div></div><a id="\Dotpay\Tool\IBAN::$bban" class="anchor"></a><div class="property protected"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png" alt="&gt;"></img><img src="../images/icons/arrow_down.png" alt="V" style="display: none;"></img></a><code class="title"><img src="../images/icons/property.png" alt="Property"></img><img src="../images/icons/visibility_protected.png" style="margin-right: 5px" alt="protected"></img><span class="highlight">$bban</span></code><div class="description"></div><div class="code-tabs"><div xmlns:php="http://php.net/xsl" class="long-description"></div><strong>Details</strong><dl class="property-info"><dt>Type</dt><dd>n/a</dd></dl></div><div class="clear"></div></div><a id="\Dotpay\Tool\IBAN::$check" class="anchor"></a><div class="property protected"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png" alt="&gt;"></img><img src="../images/icons/arrow_down.png" alt="V" style="display: none;"></img></a><code class="title"><img src="../images/icons/property.png" alt="Property"></img><img src="../images/icons/visibility_protected.png" style="margin-right: 5px" alt="protected"></img><span class="highlight">$check</span></code><div class="description"></div><div class="code-tabs"><div xmlns:php="http://php.net/xsl" class="long-description"></div><strong>Details</strong><dl class="property-info"><dt>Type</dt><dd>n/a</dd></dl></div><div class="clear"></div></div><a id="\Dotpay\Tool\IBAN::$countryCode" class="anchor"></a><div class="property protected"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png" alt="&gt;"></img><img src="../images/icons/arrow_down.png" alt="V" style="display: none;"></img></a><code class="title"><img src="../images/icons/property.png" alt="Property"></img><img src="../images/icons/visibility_protected.png" style="margin-right: 5px" alt="protected"></img><span class="highlight">$countryCode</span></code><div class="description"></div><div class="code-tabs"><div xmlns:php="http://php.net/xsl" class="long-description"></div><strong>Details</strong><dl class="property-info"><dt>Type</dt><dd>n/a</dd></dl></div><div class="clear"></div></div></div><h3>Methods</h3><div><a id="\Dotpay\Tool\IBAN::__construct()" class="anchor"></a><div class="method public"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png"></img><img src="../images/icons/arrow_down.png" style="display: none;"></img></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"></img><img src="../images/icons/visibility_public.png" style="margin-right: 5px" alt="public"></img><span class="highlight">__construct</span><span class="nb-faded-text">(string $countryCode, integer $check, string $bban)</span> : void</code><div class="description"><p class="short_description">International Back Account Number constructor.</p></div><div class="code-tabs"><div xmlns:php="http://php.net/xsl" class="long-description"></div><strong>Parameters</strong><table class="argument-info"><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tr><th>$countryCode</th><td>string</td><td><em><p>country code using ISO 3166-1 alpha-2 - two letters</p></em></td></tr><tr><th>$check</th><td>integer</td><td><em><p>check digits - two digits</p></em></td></tr><tr><th>$bban</th><td>string</td><td><em><p>Basic Bank Account Number (BBAN) - up to 30 alphanumeric characters that
are country-specific. No special characters like <code>-</code> or space allowed here, use
the {@see createFromString} or {@see sanitize} instead if that's what you may have</p></em></td></tr></table></div><div class="clear"></div></div><a id="\Dotpay\Tool\IBAN::__toString()" class="anchor"></a><div class="method public"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png"></img><img src="../images/icons/arrow_down.png" style="display: none;"></img></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"></img><img src="../images/icons/visibility_public.png" style="margin-right: 5px" alt="public"></img><span class="highlight">__toString</span><span class="nb-faded-text">()</span> : void</code><div class="description"><p class="short_description"></p></div><div class="code-tabs"><div xmlns:php="http://php.net/xsl" class="long-description"></div></div><div class="clear"></div></div><a id="\Dotpay\Tool\IBAN::createFromString()" class="anchor"></a><div class="method public"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png"></img><img src="../images/icons/arrow_down.png" style="display: none;"></img></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"></img><img src="../images/icons/visibility_public.png" style="margin-right: 5px" alt="public"></img><span class="highlight">createFromString</span><span class="nb-faded-text">( $accountNumber)</span> : void</code><div class="description"><span class="attribute">static</span><p class="short_description"></p></div><div class="code-tabs"><div xmlns:php="http://php.net/xsl" class="long-description"></div><strong>Parameters</strong><table class="argument-info"><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tr><th>$accountNumber</th><td></td><td><em></em></td></tr></table></div><div class="clear"></div></div><a id="\Dotpay\Tool\IBAN::getIBANLengths()" class="anchor"></a><div class="method public"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png"></img><img src="../images/icons/arrow_down.png" style="display: none;"></img></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"></img><img src="../images/icons/visibility_public.png" style="margin-right: 5px" alt="public"></img><span class="highlight">getIBANLengths</span><span class="nb-faded-text">()</span> : void</code><div class="description"><p class="short_description"></p></div><div class="code-tabs"><div xmlns:php="http://php.net/xsl" class="long-description"></div></div><div class="clear"></div></div><a id="\Dotpay\Tool\IBAN::sanitize()" class="anchor"></a><div class="method public"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png"></img><img src="../images/icons/arrow_down.png" style="display: none;"></img></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"></img><img src="../images/icons/visibility_public.png" style="margin-right: 5px" alt="public"></img><span class="highlight">sanitize</span><span class="nb-faded-text">(string $accountNumber)</span> : string</code><div class="description"><span class="attribute">static</span><p class="short_description">removes common used white spacing and hyphenation from the account number</p></div><div class="code-tabs"><div xmlns:php="http://php.net/xsl" class="long-description"></div><strong>Parameters</strong><table class="argument-info"><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tr><th>$accountNumber</th><td>string</td><td><em></em></td></tr></table><strong>Returns</strong><table class="argument-info"><thead><tr><th>Type</th><th>Description</th></tr></thead><tr><td>string</td><td></td></tr></table></div><div class="clear"></div></div><a id="\Dotpay\Tool\IBAN::setIBANLengths()" class="anchor"></a><div class="method public"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png"></img><img src="../images/icons/arrow_down.png" style="display: none;"></img></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"></img><img src="../images/icons/visibility_public.png" style="margin-right: 5px" alt="public"></img><span class="highlight">setIBANLengths</span><span class="nb-faded-text">(array $IBANLengths)</span> : void</code><div class="description"><span class="attribute">static</span><p class="short_description">a 'CountryCode' => length pair assoc array, country codes must be UPPER case
setting these will override the defaults</p></div><div class="code-tabs"><div xmlns:php="http://php.net/xsl" class="long-description"></div><strong>Parameters</strong><table class="argument-info"><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tr><th>$IBANLengths</th><td>array</td><td><em></em></td></tr></table></div><div class="clear"></div></div><a id="\Dotpay\Tool\IBAN::toFormattedString()" class="anchor"></a><div class="method public"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png"></img><img src="../images/icons/arrow_down.png" style="display: none;"></img></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"></img><img src="../images/icons/visibility_public.png" style="margin-right: 5px" alt="public"></img><span class="highlight">toFormattedString</span><span class="nb-faded-text">(string $separator = ' ', integer $size = 4, boolean $prefix = false)</span> : string</code><div class="description"><p class="short_description"></p></div><div class="code-tabs"><div xmlns:php="http://php.net/xsl" class="long-description"></div><strong>Parameters</strong><table class="argument-info"><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tr><th>$separator</th><td>string</td><td><em><p>supported separators are white spaces (regex \s) and hyphen (-) all other separators
will not be able to be converted back into objects, a combination may be used.</p></em></td></tr><tr><th>$size</th><td>integer</td><td><em><p>the separator group size to use, this will chunk</p></em></td></tr><tr><th>$prefix</th><td>boolean</td><td><em><p>when true <code>IBAN</code> will be prefixed</p></em></td></tr></table><strong>Returns</strong><table class="argument-info"><thead><tr><th>Type</th><th>Description</th></tr></thead><tr><td>string</td><td></td></tr></table></div><div class="clear"></div></div><a id="\Dotpay\Tool\IBAN::validateSelf()" class="anchor"></a><div class="method protected"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png"></img><img src="../images/icons/arrow_down.png" style="display: none;"></img></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"></img><img src="../images/icons/visibility_protected.png" style="margin-right: 5px" alt="protected"></img><span class="highlight">validateSelf</span><span class="nb-faded-text">()</span> : void</code><div class="description"><p class="short_description">Generating IBAN check digits
According to the ECBS "generation of the IBAN shall be the exclusive responsibility of the bank/branch servicing
the account".[8] The ECBS document replicates part of the ISO/IEC 7064:2003 standard as a method for generating
check digits in the range 02 to 98. Check digits in the ranges 00 to 96, 01 to 97, and 03 to 99 will also
provide validation of an IBAN, but the standard is silent as to whether or not these ranges may be used.</p></div><div class="code-tabs"><div xmlns:php="http://php.net/xsl" class="long-description"><p>The preferred algorithm is:</p>
<ol>
<li>Check that the total IBAN length is correct as per the country. If not, the IBAN is invalid</li>
<li>Replace the two check digits by 00 (e.g. GB00 for the UK)</li>
<li>Move the four initial characters to the end of the string</li>
<li>Replace the letters in the string with digits, expanding the string as necessary, such that A or a = 10,
B or b = 11, and Z or z = 35. Each alphabetic character is therefore replaced by 2 digits</li>
<li>Convert the string to an integer (i.e. ignore leading zeroes)</li>
<li>Calculate mod-97 of the new number, which results in the remainder</li>
<li>Subtract the remainder from 98, and use the result for the two check digits. If the result is a single digit
number, pad it with a leading 0 to make a two-digit number</li>
</ol></div></div><div class="clear"></div></div></div></div></div><small class="footer">
            Documentation was generated by
            <a href="http://phpdoc.org">phpDocumentor
                2.8.5</a>.
        </small></body></html>
